openapi: 3.0.0
info:
  title: Contoso Widget Manager
  version: 2022-08-31
tags: []
paths:
  /widgets:
    get:
      operationId: Widgets_listWidgets
      description: List Widget resources
      parameters:
        - $ref: '#/components/parameters/Azure.Core.Foundations.ApiVersionParameter'
        - $ref: '#/components/parameters/Azure.Core.TopQueryParameter'
        - $ref: '#/components/parameters/Azure.Core.SkipQueryParameter'
        - $ref: '#/components/parameters/Azure.Core.MaxPageSizeQueryParameter'
        - $ref: '#/components/parameters/Azure.Core.SelectQueryParameter'
        - $ref: '#/components/parameters/Azure.Core.ClientRequestIdHeader'
      responses:
        '200':
          description: The request has succeeded.
          headers:
            x-ms-client-request-id:
              required: false
              description: An opaque, globally-unique, client-generated string identifier for the request.
              schema:
                $ref: '#/components/schemas/Azure.Core.uuid'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PagedWidget'
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WidgetServiceErrorResponse'
  /widgets/{widgetName}:
    patch:
      operationId: Widgets_createOrUpdateWidget
      description: Creates or updates a Widget asynchronously
      parameters:
        - $ref: '#/components/parameters/Azure.Core.Foundations.ApiVersionParameter'
        - name: widgetName
          in: path
          required: true
          description: The widget name.
          schema:
            type: string
        - $ref: '#/components/parameters/Azure.Core.RepeatabilityRequestHeaders.repeatabilityRequestId'
        - $ref: '#/components/parameters/Azure.Core.RepeatabilityRequestHeaders.repeatabilityFirstSent'
        - $ref: '#/components/parameters/Azure.Core.ConditionalRequestHeaders.ifMatch'
        - $ref: '#/components/parameters/Azure.Core.ConditionalRequestHeaders.ifNoneMatch'
        - $ref: '#/components/parameters/Azure.Core.ConditionalRequestHeaders.ifUnmodifiedSince'
        - $ref: '#/components/parameters/Azure.Core.ConditionalRequestHeaders.ifModifiedSince'
        - $ref: '#/components/parameters/Azure.Core.ClientRequestIdHeader'
      responses:
        '200':
          description: The request has succeeded.
          headers:
            Repeatability-Result:
              required: false
              description: Indicates whether the repeatable request was accepted or rejected.
              schema:
                $ref: '#/components/schemas/Azure.Core.RepeatabilityResult'
            ETag:
              required: false
              description: The entity tag for the response.
              schema:
                type: string
            x-ms-client-request-id:
              required: false
              description: An opaque, globally-unique, client-generated string identifier for the request.
              schema:
                $ref: '#/components/schemas/Azure.Core.uuid'
            Operation-Location:
              required: true
              description: The location for monitoring the operation state.
              schema:
                type: string
                format: uri
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Widget'
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          headers:
            Repeatability-Result:
              required: false
              description: Indicates whether the repeatable request was accepted or rejected.
              schema:
                $ref: '#/components/schemas/Azure.Core.RepeatabilityResult'
            ETag:
              required: false
              description: The entity tag for the response.
              schema:
                type: string
            x-ms-client-request-id:
              required: false
              description: An opaque, globally-unique, client-generated string identifier for the request.
              schema:
                $ref: '#/components/schemas/Azure.Core.uuid'
            Operation-Location:
              required: true
              description: The location for monitoring the operation state.
              schema:
                type: string
                format: uri
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Widget'
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WidgetServiceErrorResponse'
      requestBody:
        required: true
        content:
          application/merge-patch+json:
            schema:
              $ref: '#/components/schemas/WidgetCreateOrUpdate'
        description: The resource instance.
    get:
      operationId: Widgets_getWidget
      description: Get a Widget
      parameters:
        - $ref: '#/components/parameters/Azure.Core.Foundations.ApiVersionParameter'
        - name: widgetName
          in: path
          required: true
          description: The widget name.
          schema:
            type: string
        - $ref: '#/components/parameters/Azure.Core.ConditionalRequestHeaders.ifMatch'
        - $ref: '#/components/parameters/Azure.Core.ConditionalRequestHeaders.ifNoneMatch'
        - $ref: '#/components/parameters/Azure.Core.ConditionalRequestHeaders.ifUnmodifiedSince'
        - $ref: '#/components/parameters/Azure.Core.ConditionalRequestHeaders.ifModifiedSince'
        - $ref: '#/components/parameters/Azure.Core.ClientRequestIdHeader'
      responses:
        '200':
          description: The request has succeeded.
          headers:
            ETag:
              required: false
              description: The entity tag for the response.
              schema:
                type: string
            x-ms-client-request-id:
              required: false
              description: An opaque, globally-unique, client-generated string identifier for the request.
              schema:
                $ref: '#/components/schemas/Azure.Core.uuid'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Widget'
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WidgetServiceErrorResponse'
    delete:
      operationId: Widgets_deleteWidget
      description: Delete a Widget asynchronously.
      parameters:
        - $ref: '#/components/parameters/Azure.Core.Foundations.ApiVersionParameter'
        - name: widgetName
          in: path
          required: true
          description: The widget name.
          schema:
            type: string
        - $ref: '#/components/parameters/Azure.Core.RepeatabilityRequestHeaders.repeatabilityRequestId'
        - $ref: '#/components/parameters/Azure.Core.RepeatabilityRequestHeaders.repeatabilityFirstSent'
        - $ref: '#/components/parameters/Azure.Core.ConditionalRequestHeaders.ifMatch'
        - $ref: '#/components/parameters/Azure.Core.ConditionalRequestHeaders.ifNoneMatch'
        - $ref: '#/components/parameters/Azure.Core.ConditionalRequestHeaders.ifUnmodifiedSince'
        - $ref: '#/components/parameters/Azure.Core.ConditionalRequestHeaders.ifModifiedSince'
        - $ref: '#/components/parameters/Azure.Core.ClientRequestIdHeader'
      responses:
        '202':
          description: The request has been accepted for processing, but processing has not yet completed.
          headers:
            Operation-Location:
              required: true
              description: The location for monitoring the operation state.
              schema:
                type: string
                format: uri
            Repeatability-Result:
              required: false
              description: Indicates whether the repeatable request was accepted or rejected.
              schema:
                $ref: '#/components/schemas/Azure.Core.RepeatabilityResult'
            x-ms-client-request-id:
              required: false
              description: An opaque, globally-unique, client-generated string identifier for the request.
              schema:
                $ref: '#/components/schemas/Azure.Core.uuid'
          content:
            application/json:
              schema:
                type: object
                required:
                  - id
                  - status
                properties:
                  id:
                    type: string
                    description: The unique ID of the operation.
                  status:
                    allOf:
                      - $ref: '#/components/schemas/Azure.Core.Foundations.OperationState'
                    description: The status of the operation
                  error:
                    allOf:
                      - $ref: '#/components/schemas/Azure.Core.Foundations.Error'
                    description: Error object that describes the error when status is "Failed".
                description: Provides status details for long running operations.
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WidgetServiceErrorResponse'
  /widgets/{widgetName}/operations/{operationId}:
    get:
      operationId: Widgets_getWidgetOperationStatus_Widgets_getWidgetDeleteOperationStatus
      parameters:
        - $ref: '#/components/parameters/Azure.Core.Foundations.ApiVersionParameter'
        - name: widgetName
          in: path
          required: true
          description: The widget name.
          schema:
            type: string
        - name: operationId
          in: path
          required: true
          description: The unique ID of the operation.
          schema:
            type: string
      description: Gets status of a Widget operation. Gets the status of a Widget delete operation
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - type: object
                    required:
                      - id
                      - status
                    properties:
                      id:
                        type: string
                        description: The unique ID of the operation.
                      status:
                        allOf:
                          - $ref: '#/components/schemas/Azure.Core.Foundations.OperationState'
                        description: The status of the operation
                      error:
                        allOf:
                          - $ref: '#/components/schemas/Azure.Core.Foundations.Error'
                        description: Error object that describes the error when status is "Failed".
                      result:
                        allOf:
                          - $ref: '#/components/schemas/Widget'
                        description: The result of the operation.
                    description: Provides status details for long running operations.
                  - type: object
                    required:
                      - id
                      - status
                    properties:
                      id:
                        type: string
                        description: The unique ID of the operation.
                      status:
                        allOf:
                          - $ref: '#/components/schemas/Azure.Core.Foundations.OperationState'
                        description: The status of the operation
                      error:
                        allOf:
                          - $ref: '#/components/schemas/Azure.Core.Foundations.Error'
                        description: Error object that describes the error when status is "Failed".
                    description: Provides status details for long running operations.
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WidgetServiceErrorResponse'
security:
  - ApiKeyAuth: []
components:
  parameters:
    Azure.Core.ClientRequestIdHeader:
      name: x-ms-client-request-id
      in: header
      required: false
      description: An opaque, globally-unique, client-generated string identifier for the request.
      schema:
        $ref: '#/components/schemas/Azure.Core.uuid'
    Azure.Core.ConditionalRequestHeaders.ifMatch:
      name: If-Match
      in: header
      required: false
      description: The request should only proceed if an entity matches this string.
      schema:
        type: string
    Azure.Core.ConditionalRequestHeaders.ifModifiedSince:
      name: If-Modified-Since
      in: header
      required: false
      description: The request should only proceed if the entity was modified after this time.
      schema:
        type: string
        format: date-time
    Azure.Core.ConditionalRequestHeaders.ifNoneMatch:
      name: If-None-Match
      in: header
      required: false
      description: The request should only proceed if no entity matches this string.
      schema:
        type: string
    Azure.Core.ConditionalRequestHeaders.ifUnmodifiedSince:
      name: If-Unmodified-Since
      in: header
      required: false
      description: The request should only proceed if the entity was not modified after this time.
      schema:
        type: string
        format: date-time
    Azure.Core.Foundations.ApiVersionParameter:
      name: api-version
      in: query
      required: true
      description: The API version to use for this operation.
      schema:
        type: string
        minLength: 1
      explode: false
    Azure.Core.MaxPageSizeQueryParameter:
      name: maxpagesize
      in: query
      required: false
      description: The maximum number of result items per page.
      schema:
        type: integer
        format: int32
      explode: false
    Azure.Core.RepeatabilityRequestHeaders.repeatabilityFirstSent:
      name: Repeatability-First-Sent
      in: header
      required: false
      description: Specifies the date and time at which the request was first created.
      schema:
        type: string
        format: date-time
    Azure.Core.RepeatabilityRequestHeaders.repeatabilityRequestId:
      name: Repeatability-Request-ID
      in: header
      required: false
      description: An opaque, globally-unique, client-generated string identifier for the request.
      schema:
        type: string
    Azure.Core.SelectQueryParameter:
      name: select
      in: query
      required: false
      description: Select the specified fields to be included in the response.
      schema:
        type: array
        items:
          type: string
    Azure.Core.SkipQueryParameter:
      name: skip
      in: query
      required: false
      description: The number of result items to skip.
      schema:
        type: integer
        format: int32
        default: 0
      explode: false
    Azure.Core.TopQueryParameter:
      name: top
      in: query
      required: false
      description: The number of result items to return.
      schema:
        type: integer
        format: int32
      explode: false
  schemas:
    Azure.Core.Foundations.Error:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          description: One of a server-defined set of error codes.
        message:
          type: string
          description: A human-readable representation of the error.
        target:
          type: string
          description: The target of the error.
        details:
          type: array
          items:
            $ref: '#/components/schemas/Azure.Core.Foundations.Error'
          description: An array of details about specific errors that led to this reported error.
        innererror:
          allOf:
            - $ref: '#/components/schemas/Azure.Core.Foundations.InnerError'
          description: An object containing more specific information than the current object about the error.
      description: The error object.
    Azure.Core.Foundations.InnerError:
      type: object
      properties:
        code:
          type: string
          description: One of a server-defined set of error codes.
        innererror:
          allOf:
            - $ref: '#/components/schemas/Azure.Core.Foundations.InnerError'
          description: Inner error.
      description: An object containing more specific information about the error. As per Microsoft One API guidelines - https://github.com/Microsoft/api-guidelines/blob/vNext/Guidelines.md#7102-error-condition-responses.
    Azure.Core.Foundations.OperationState:
      anyOf:
        - type: string
          enum:
            - NotStarted
            - Running
            - Succeeded
            - Failed
            - Canceled
        - type: string
      description: Enum describing allowed operation states.
    Azure.Core.RepeatabilityResult:
      type: string
      enum:
        - accepted
        - rejected
      description: Repeatability Result header options
    Azure.Core.eTag:
      type: string
      format: eTag
      description: |-
        The ETag (or entity tag) HTTP response header is an identifier for a specific version of a resource.
        It lets caches be more efficient and save bandwidth, as a web server does not need to resend a full response if the content was not changed.

        It is a string of ASCII characters placed between double quotes, like "675af34563dc-tr34".
    Azure.Core.uuid:
      type: string
      format: uuid
      description: Universally Unique Identifier
    PagedWidget:
      type: object
      required:
        - value
      properties:
        value:
          type: array
          items:
            $ref: '#/components/schemas/Widget'
          description: The Widget items on this page
        nextLink:
          type: string
          format: uri
          description: The link to the next page of items
      description: Paged collection of Widget items
    Versions:
      type: string
      enum:
        - 2022-08-31
      description: The Contoso Widget Manager service version.
    Widget:
      type: object
      required:
        - name
        - manufacturerId
        - etag
      properties:
        name:
          type: string
          description: The widget name.
          readOnly: true
        manufacturerId:
          type: string
          description: The ID of the widget's manufacturer.
        etag:
          allOf:
            - $ref: '#/components/schemas/Azure.Core.eTag'
          description: The entity tag for this resource.
          readOnly: true
      description: A widget.
    WidgetCreateOrUpdate:
      type: object
      properties:
        manufacturerId:
          type: string
          description: The ID of the widget's manufacturer.
      description: A widget.
    WidgetServiceErrorResponse:
      type: object
      required:
        - code
        - errorMessage
      properties:
        code:
          type: integer
          format: int32
          description: The numeric error code.
        errorMessage:
          type: string
          description: The error message.
      description: A custom error type for the Widget Manager service.
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-Key
