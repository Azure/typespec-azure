# 1. Create TypeSpec ProviderHub ASP.NET Project

### Install or refresh .NET template

```bash
dotnet new install Microsoft.TypeSpec.ProviderHub.Templates
```

### Create typespec-providerhub project with a sample UserRP service using template

```bash
 dotnet new typespec-providerhub -P <provider> -o <project folder> --allow-scripts yes
```

> Note:
>
> 1.  the project name by default is the project folder name, you can specify it through the '-n' option.
> 2.  You can generate a project that only contains models using the '-m' or '--models-only' option.

### Edit TypeSpec spec and generate UserRP

You can open the solution created above in Visual Studio or vscode. This project contains starter TypeSpec spec and will auto-refresh generated User.RP controller service code.

the generated solution structure is as follows:

```
contoso.sln
└── src
    └── typespec
        ├── typespec.csproj
        └── typespec
          ├── main.tsp
          └── package.json
    └── contoso
        ├── contoso.csproj
        ├── Startup.cs
        └── onebox
            └── <rpaas onebox configurations>

```

The `typespec.csproj` is configured to generate typespec models only into csharp models.
The generated providerhub controller is generated by `contoso.csproj` which has a project reference to the `typespec.csproj` and the `TypeSpecCompile` msbuild task is configured to used the `tsp compiler` in `typespec.csproj` by using 'CommandPath' with relative path.
like this:

```
<ItemGroup>
    <TypeSpecCompile Include="..\typespec\typespec\main.tsp" CommandPath="$(MSBuildProjectDirectory)/../typespec/typespec/node_modules/.bin" OutputDir="$(MSBuildProjectDirectory)" Options="@azure-tools/typespec-providerhub-controller.code-kind=controller" Emitters="@azure-tools/typespec-providerhub-controller" />
</ItemGroup>
```
